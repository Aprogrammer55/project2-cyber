<!DOCTYPE html>
<html lang="en">
<!-- 
Change pause time	QUIZ_TIME
Change popup question	QUIZ_QUESTION
Change correct answer	QUIZ_ANSWER -->

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Red Team - Level 1</title>

    <style>
        body {
            margin: 0;
            font-family: Consolas, monospace;
            background: #080808;
            color: #f2f2f2;
            display: flex;
            min-height: 100vh;
        }

        /* Left + Right Containers */
        .left-container {
            width: 50%;
            padding: 30px;
            overflow-y: auto;
        }

        .right-container {
            width: 50%;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            background: #0f0f0f;
            border-left: 2px solid #220000;
            padding: 20px;
        }

        /* TABS */
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .tab {
            padding: 10px 18px;
            background: #1a1a1a;
            color: #f2f2f2;
            border-radius: 6px 6px 0 0;
            cursor: pointer;
            border: 1px solid #330000;
            border-bottom: none;
        }

        .tab.active {
            background: #b30000;
            color: #fff;
            box-shadow: 0 0 10px #ff0000;
        }

        /* Content Boxes */
        .content-box {
            display: none;
        }

        .content-box.active {
            display: block;
        }

        /* Video */
        video {
            width: 90%;
            margin-top: 20px;
            border: 2px solid #330000;
            border-radius: 10px;
            box-shadow: 0 0 20px #ff000050;
        }

        input[type="file"] {
            margin-top: 10px;
        }

        /* QUIZ POPUP */
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 9998;
        }

        .quiz-popup {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #150000;
            border: 2px solid #ff0000;
            box-shadow: 0 0 20px #ff0000;
            padding: 25px;
            width: 350px;
            border-radius: 10px;
            z-index: 9999;
            text-align: center;
        }

        .quiz-popup input {
            width: 100%;
            padding: 8px;
            margin-top: 10px;
            background: #0f0f0f;
            border: 1px solid #ff0000;
            color: #fff;
        }

        .quiz-popup button {
            margin-top: 15px;
            width: 100%;
            padding: 10px;
            background: #b30000;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 16px;
            box-shadow: 0 0 10px #ff0000;
        }
    </style>
</head>

<body>

    <div class="left-container">

        <!-- TABS -->
        <div class="tabs">
            <div class="tab active" onclick="switchTab('intro')">üìò Introduction</div>
            <div class="tab" onclick="switchTab('exam')">üìù Final Exam</div>
        </div>

        <!-- INTRO TAB -->
        <div id="intro" class="content-box active">
            <h1>Red Team ‚Äî Level 1</h1>
            <h2>Recon Basics</h2>
            <p>
                Reconnaissance (Recon) is the first and most critical phase in ethical hacking and red teaming.
                It involves gathering as much information as possible about a target.
                <br><br>
                <strong>Passive Recon:</strong> Collecting information without interacting with the target.
                <br><br>
                <strong>Active Recon:</strong> Direct interaction like scanning and enumeration.
            </p>
        </div>

        <!-- EXAM TAB -->
        <div id="exam" class="content-box">
            <h2>Final Exam</h2>
            <p>Answer correctly to unlock Level 2.</p>

            <p><strong>1.</strong> Explain passive vs active recon.</p>
            <input id="q1" type="text">

            <p><strong>2.</strong> Name a passive recon tool.</p>
            <input id="q2" type="text">

            <p><strong>3.</strong> Why is recon important?</p>
            <input id="q3" type="text">

            <p><strong>4.</strong> Give one active recon example.</p>
            <input id="q4" type="text">

            <p><strong>5.</strong> What do you look for first?</p>
            <input id="q5" type="text">

            <button onclick="gradeExam()">Submit</button>
            <p id="exam-result" style="margin-top:15px;font-weight:bold;"></p>
        </div>

    </div>


    <!-- RIGHT SIDE VIDEO AREA -->
    <div class="right-container">
        <h2>Training Video</h2>
        <input type="file" id="videoFile" accept="video/*">

        <video id="trainingVideo" controls></video>
    </div>


    <!-- QUIZ POPUP -->
    <div class="overlay" id="overlay"></div>

    <div class="quiz-popup" id="quiz">
        <h3>Red Team Checkpoint</h3>

        <!-- SEARCH CTRL+F: QUIZ_QUESTION -->
        <!-- üî• CHANGE THE QUESTION HERE  -->
        <p>What is passive recon?</p>

        <input id="quiz-answer" placeholder="Type your answer...">
        <button onclick="submitQuiz()">Submit</button>
    </div>

    <script>
        /* TAB SWITCHING */
        function switchTab(tab) {
            document.querySelectorAll(".tab").forEach(t => t.classList.remove("active"));
            document.querySelectorAll(".content-box").forEach(b => b.classList.remove("active"));

            event.target.classList.add("active");
            document.getElementById(tab).classList.add("active");
        }

        /* VIDEO HANDLING */
        const fileInput = document.getElementById("videoFile");
        const video = document.getElementById("trainingVideo");

        let quizShown = false;

        fileInput.addEventListener("change", () => {
            const file = fileInput.files[0];
            if (file) {
                video.src = URL.createObjectURL(file);
                video.load();
                quizShown = false; // reset for new video
            }
        });

        // SEARCH CTRL+F: QUIZ_TIME  
        // üî• CHANGE PAUSE TIME HERE
        const pauseTime = 5; // seconds

        video.addEventListener("timeupdate", () => {
            if (!quizShown && video.currentTime >= pauseTime) {
                video.pause();
                quizShown = true;

                document.getElementById("quiz").style.display = "block";
                document.getElementById("overlay").style.display = "block";
            }
        });

        /* QUIZ CHECK */
        function submitQuiz() {
            const answer = document.getElementById("quiz-answer").value.toLowerCase();

            // SEARCH CTRL+F: QUIZ_ANSWER  
            // üî• CHANGE CORRECT ANSWER HERE
            if (answer.includes("passive")) {
                closeQuiz();
                video.play();
            } else {
                alert("Incorrect. Try again, soldier.");
            }
        }

        function closeQuiz() {
            document.getElementById("quiz").style.display = "none";
            document.getElementById("overlay").style.display = "none";
        }

        /* EXAM GRADING */
        function gradeExam() {
            let correct = 0;

            if (q1.value.toLowerCase().includes("passive")) correct++;
            if (q2.value.toLowerCase().includes("whois") || q2.value.toLowerCase().includes("google")) correct++;
            if (q3.value.toLowerCase().includes("info")) correct++;
            if (q4.value.toLowerCase().includes("scan")) correct++;
            if (q5.value.toLowerCase().includes("target")) correct++;

            let out = document.getElementById("exam-result");

            if (correct >= 4) {
                out.style.color = "#00ff00";
                out.innerText = "‚úî Level 2 unlocked!";
                localStorage.setItem("level2_unlocked", "true");
            } else {
                out.style.color = "red";
                out.innerText = "‚úò Not enough correct answers.";
            }
        }
    </script>

</body>

</html>