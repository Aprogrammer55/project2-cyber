<!DOCTYPE html>
<html lang="en">

<!--
CTRL+F QUICK CONFIG:
QUIZ_TIME        -> when quiz appears
REWIND_TIME      -> how many seconds user is forced back
QUIZ_QUESTION    -> quiz text
QUIZ_ANSWER      -> accepted answer keyword
-->

<head>
    <meta charset="UTF-8">
    <title>Red Team - Level 1</title>

    <style>
        body {
            margin: 0;
            font-family: Consolas, monospace;
            background: #080808;
            color: #f2f2f2;
            display: flex;
            min-height: 100vh;
        }

        /* LEFT / RIGHT */
        .left-container {
            width: 50%;
            padding: 30px;
            overflow-y: auto;
        }

        .right-container {
            width: 50%;
            background: #0f0f0f;
            border-left: 2px solid #220000;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* TABS */
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .tab {
            padding: 10px 18px;
            background: #1a1a1a;
            border: 1px solid #330000;
            border-bottom: none;
            border-radius: 6px 6px 0 0;
            cursor: pointer;
        }

        .tab.active {
            background: #b30000;
            box-shadow: 0 0 10px #ff0000;
        }

        .content-box {
            display: none;
        }

        .content-box.active {
            display: block;
        }

        /* VIDEO */
        video {
            width: 90%;
            margin-top: 20px;
            border-radius: 10px;
            border: 2px solid #330000;
            box-shadow: 0 0 20px #ff000050;
        }

        /* QUIZ OVERLAY */
        .overlay {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.85);
            z-index: 9998;
        }

        .quiz-popup {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(145deg, #160000, #0c0000);
            border: 2px solid #ff0000;
            box-shadow: 0 0 30px #ff0000;
            padding: 25px;
            width: 380px;
            border-radius: 12px;
            z-index: 9999;
            text-align: center;
            animation: fadeIn 0.4s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translate(-50%, -55%);
            }

            to {
                opacity: 1;
                transform: translate(-50%, -50%);
            }
        }

        .quiz-popup h3 {
            color: #ff4444;
            margin-bottom: 10px;
        }

        .quiz-popup input {
            width: 100%;
            padding: 10px;
            margin-top: 10px;
            background: #0f0f0f;
            border: 1px solid #ff0000;
            color: white;
            border-radius: 6px;
        }

        .quiz-buttons {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .quiz-popup button {
            flex: 1;
            padding: 10px;
            font-size: 14px;
            cursor: pointer;
            border-radius: 6px;
            border: none;
        }

        .submit-btn {
            background: #b30000;
            color: white;
            box-shadow: 0 0 10px #ff0000;
        }

        .quit-btn {
            background: #222;
            color: #aaa;
        }
    </style>
</head>

<body>

    <div class="left-container">

        <div class="tabs">
            <div class="tab active" onclick="switchTab('intro')">üìò Introduction</div>
            <div class="tab" onclick="switchTab('exam')">üìù Final Exam</div>
        </div>

        <div id="intro" class="content-box active">
            <h1>Red Team ‚Äî Level 1</h1>
            <h2>Recon Basics</h2>
            <p>
                Reconnaissance is the foundation of every offensive operation.
                <br><br>
                <strong>Passive Recon:</strong> No interaction with the target.
                <br>
                <strong>Active Recon:</strong> Direct engagement (scanning, probing).
            </p>
        </div>

        <div id="exam" class="content-box">
            <h2>Final Exam</h2>
            <p>Answer correctly to unlock Level 2.</p>
            <input id="q1" placeholder="Passive vs Active recon">
            <input id="q2" placeholder="Passive recon tool">
            <input id="q3" placeholder="Why recon matters">
            <input id="q4" placeholder="Active recon example">
            <input id="q5" placeholder="First recon step">
            <button onclick="gradeExam()">Submit</button>
            <p id="exam-result"></p>
        </div>

    </div>

    <div class="right-container">
        <h2>Training Video</h2>
        <video id="trainingVideo" controls>
            <source src="recon.mp4" type="video/mp4">
        </video>
    </div>

    <!-- QUIZ -->
    <div class="overlay" id="overlay"></div>

    <div class="quiz-popup" id="quiz">
        <h3>üõë Recon Checkpoint</h3>

        <!-- SEARCH CTRL+F: QUIZ_QUESTION -->
        <p>What is passive reconnaissance?</p>

        <input id="quiz-answer" placeholder="Type your answer...">

        <div class="quiz-buttons">
            <button class="submit-btn" onclick="submitQuiz()">Submit</button>
            <button class="quit-btn" onclick="quitQuiz()">Quit & Rewatch</button>
        </div>
    </div>
    <script>
        /* =========================
           TAB SWITCHING
        ========================== */
        function switchTab(tab) {
            document.querySelectorAll(".tab").forEach(t => t.classList.remove("active"));
            document.querySelectorAll(".content-box").forEach(c => c.classList.remove("active"));
            event.target.classList.add("active");
            document.getElementById(tab).classList.add("active");
        }

        /* =========================
           VIDEO + QUIZ CONTROL
        ========================== */
        const video = document.getElementById("trainingVideo");
        const quiz = document.getElementById("quiz");
        const overlay = document.getElementById("overlay");

        let quizTriggered = false; // reached quiz point
        let quizPassed = false;    // answered correctly

        // SEARCH CTRL+F: QUIZ_TIME
        const pauseTime = 90; // seconds (quiz checkpoint)

        // SEARCH CTRL+F: REWIND_TIME
        const rewindTime = 10; // seconds forced back if quit

        /* =========================
           HARD WATCHER (UNSKIPPABLE)
        ========================== */
        setInterval(() => {
            if (!quizPassed && video.currentTime >= pauseTime) {
                quizTriggered = true;
                video.pause();
                video.currentTime = pauseTime;
                overlay.style.display = "block";
                quiz.style.display = "block";
            }
        }, 200);

        /* =========================
           SNAP BACK IF USER SEEKS
        ========================== */
        video.addEventListener("seeking", () => {
            if (!quizPassed && video.currentTime > pauseTime) {
                video.currentTime = pauseTime;
            }
        });

        /* =========================
           QUIZ ACTIONS
        ========================== */
        function submitQuiz() {
            const answer = document.getElementById("quiz-answer").value.toLowerCase();

            // SEARCH CTRL+F: QUIZ_ANSWER
            if (answer.includes("passive")) {
                quizPassed = true;
                closeQuiz();
                video.play();
            } else {
                alert("Incorrect. Try again.");
            }
        }

        function quitQuiz() {
            closeQuiz();
            quizTriggered = false;
            video.currentTime = Math.max(0, pauseTime - rewindTime);
            video.play();
        }

        function closeQuiz() {
            quiz.style.display = "none";
            overlay.style.display = "none";
            document.getElementById("quiz-answer").value = "";
        }

        /* =========================
           FINAL EXAM
        ========================== */
        function gradeExam() {
            let correct = 0;

            if (q1.value.toLowerCase().includes("passive")) correct++;
            if (q2.value.toLowerCase().includes("whois") || q2.value.toLowerCase().includes("google")) correct++;
            if (q3.value.toLowerCase().includes("info")) correct++;
            if (q4.value.toLowerCase().includes("scan")) correct++;
            if (q5.value.toLowerCase().includes("target")) correct++;

            const out = document.getElementById("exam-result");

            if (correct >= 4) {
                out.style.color = "#00ff00";
                out.innerText = "‚úî Level 2 unlocked!";
                localStorage.setItem("level2_unlocked", "true");
            } else {
                out.style.color = "red";
                out.innerText = "‚úò Not enough correct answers.";
            }
        }
    </script>


</body>

</html>